# ==================== 必需的环境变量 ====================

# 运行环境
NODE_ENV=production

# Vercel Blob 存储令牌（可选，当未配置 DATABASE_URL 时作为回退）
# 获取方式：Vercel 项目设置 -> Storage -> Blob -> Connect
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_xxxxxxxxxxxxx

# Neon PostgreSQL 数据库连接（推荐）
# 获取方式：Vercel Dashboard -> Storage -> 创建 Neon Postgres
DATABASE_URL=postgres://user:password@xxx.neon.tech/dbname?sslmode=require

# 强制使用旧存储（Blob/JSON），用于回滚
# 设置为 true 可临时禁用 PostgreSQL，回退到 Blob 存储
USE_LEGACY_STORAGE=false

# CORS 白名单（生产环境必需，逗号分隔）
# 支持通配符子域名，如 *.vercel.app
ALLOWED_ORIGINS=*.vercel.app,https://yourdomain.com

# ==================== 强烈推荐的环境变量 ====================

# Blob 加密密钥（32字节，base64编码）
# 生成方法：node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# 重要：备份此密钥，丢失将无法恢复数据！
BLOB_ENCRYPTION_KEY=your-32-byte-encryption-key-in-base64

# 采购 API 凭证
# 从 outlook007.cc 后台获取
PURCHASE_APP_ID=1097
PURCHASE_APP_KEY=A2380737CA36CC61

# 外部邮件 API 配置（必需）
# 邮件 API 基础 URL（用于获取邮件、处理收件箱等操作）
EXTERNAL_MAIL_API_URL=https://api.1181180.xyz/api

# 邮件 API 密码（如果外部 API 需要密码验证）
EXTERNAL_MAIL_API_PASSWORD=your-mail-api-password-here

# ==================== 可选的环境变量 ====================

# 服务器端口（本地开发）
PORT=3001

# 服务器主机（本地开发）
HOST=0.0.0.0

# 数据目录（本地文件存储，Vercel 部署时不使用）
DATA_DIR=./data

# 邮箱数据文件路径（本地开发）
MAILBOXES_FILE=./data/mailboxes.json

# 日志级别
LOG_LEVEL=info

# 速率限制窗口（毫秒）
RATE_LIMIT_WINDOW_MS=900000

# 速率限制最大请求数
RATE_LIMIT_MAX=100

# ==================== Supabase 配置（已废弃） ====================
# 注意：以下变量仅用于兼容旧版本，新版本使用 Vercel Blob

# NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=xxx

# ==================== 部署说明 ====================

# 1. 复制此文件为 .env
#    cp .env.example .env

# 2. 填写实际的配置值

# 3. 确保 .env 已添加到 .gitignore（已配置）

# 4. Vercel 部署：在项目设置中添加环境变量，不要提交 .env 文件

# 5. 本地开发：创建 .env 文件供 dotenv 加载

# ==================== 安全提示 ====================

# ⚠️ 永远不要将 .env 文件提交到 Git
# ⚠️ 使用强随机密钥
# ⚠️ 生产环境必须配置 ALLOWED_ORIGINS
# ⚠️ 定期轮换 API 密钥（3-6个月）
# ⚠️ 备份 BLOB_ENCRYPTION_KEY（丢失无法恢复数据）

# 详细配置说明请参阅：SECURITY.md
